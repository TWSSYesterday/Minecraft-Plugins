var Core={source:null,loaded:false,spinner:null,settings:{},init:function(){this.setSource();this.spinner=new Spinner;window.onload=function(){var params=Core.parseQueryString();if(params.search&&params.type){Core.search(params.search,params.type)}};$("#search-form").submit(function(){var search=$("#input-plugin-name").val(),type=$("#input-server-type :selected").attr("value");if(!search||!type){Core.error("Must not have empty parameters.");return false}});$("#input-server-type").change(function(){this.setSource()});this.source.populateSearchSuggestions()},parseQueryString:function(){var match,pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=window.location.search.substring(1);var urlParams={};while(match=search.exec(query))urlParams[decode(match[1])]=decode(match[2]);return urlParams},setSource:function(src){var source=src||$("#input-server-type :selected").attr("value");switch(source){case"bukkit":this.source=DBO;break;default:this.source=null}return this.source},search:function(search,type){this.start();this.source.search(search,type)},clearData:function(){$("#plugin-name").empty();$("#plugin-author").empty();$("#plugin-latest-version").empty();$("#plugin-description").empty();$("#plugin-website").attr("href","#");$("#plugin-repo-page").attr("href","#");$("#plugin-latest-download").attr("href","#");$("#download-table > tbody").empty()},start:function(){Core.spinner.spin(document.getElementById("spinner"))},success:function(){this.loaded=true;this.spinner.stop();$(".plugin-details").fadeIn("slow")},error:function(msg){this.loaded=false;this.spinner.stop();$(".alert").slice(0).remove();$("<div>",{"class":"alert alert-danger",role:"alert",html:msg+'<a href="#" class="close" data-dismiss="alert">&times;</a>'}).appendTo("#error")}};