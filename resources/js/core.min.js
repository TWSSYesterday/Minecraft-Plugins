var Core={source:null,loaded:false,spinner:null,websiteUrl:"https://www.minecraft-plugins.com/",settings:{},init:function(){this.setSource();this.spinner=new Spinner;window.onload=function(){var e=Core.parseQueryString();if(e.search&&e.type){Core.search(e.search,e.type)}};$("#search-form").submit(function(){var e=$("#input-search-term").val(),t=$("#input-server-type :selected").attr("value");if(!e||!t){Core.error("Must not have empty parameters.");return false}});$("#input-server-type").change(function(){this.setSource()});this.source.populateSearchSuggestions()},parseQueryString:function(){var e,t=/\+/g,r=/([^&=]+)=?([^&]*)/g,n=function(e){return decodeURIComponent(e.replace(t," "))},s=window.location.search.substring(1);var a={};while(e=r.exec(s))a[n(e[1])]=n(e[2]);return a},setSource:function(e){var t=e||$("#input-server-type :selected").attr("value");switch(t){case"bukkit":this.source=DBO;break;default:this.source=null}return this.source},search:function(e,t){this.start();this.source.search(e,t)},clearData:function(){$("#plugin-name").empty();$("#plugin-author").empty();$("#plugin-latest-version").empty();$("#plugin-description").empty();$("#plugin-website").attr("href","#");$("#plugin-repo-page").attr("href","#");$("#plugin-latest-download").attr("href","#");$("#download-table > tbody").empty()},getSearchTerm:function(){return $("#input-search-term").val()},getServerType:function(){return $("#input-server-type :selected").val()},start:function(){Core.spinner.spin(document.getElementById("spinner"))},success:function(){this.loaded=true;this.spinner.stop();$(".plugin-details").fadeIn("slow")},error:function(e){this.loaded=false;this.spinner.stop();$(".alert").slice(0).remove();$("<div>",{"class":"alert alert-danger",role:"alert",html:e+'<a href="#" class="close" data-dismiss="alert">&times;</a>'}).appendTo("#error")},populateData:function(e){Core.source.data=e;$("#plugin-name").html(e.plugin_name||"");$("#plugin-author").html(e.authors||"");$("#plugin-latest-version").html(e.versions[0].version||"");$("#plugin-description").html(e.description||"");$("#plugin-website").attr("href",e.website||"");$("#plugin-repo-page").attr("href",e.dbo_page||"");$("#plugin-latest-download").attr("href",e.versions[0].download||"");$("#plugin-logo").attr("href",e.logo_full||"resources/images/default.jpg");$("#plugin-logo img").attr("src",e.logo_full||"resources/images/default.jpg");for(var t=0;t<e.versions.length;t++){var r=$("<a>",{"class":"btn btn-primary btn-sm btn-block btn-changelog",text:"Changelog"});var n=$("<a>",{href:e.versions[t].download,"class":"btn btn-primary btn-sm btn-block",html:"<i class='icon fa fa-download'></i>Download"});$("#download-table").find("tbody").append($("<tr id='trr-"+t+"'>").append($("<td>").text(e.versions[t].version)).append($("<td>").text(e.versions[t].filename)).append($("<td>").append(r)).append($("<td>").append(n)))}$(".btn-changelog").click(function(){var e=$(this).closest("td").parent()[0].sectionRowIndex;$("#changelog-title").text(Core.source.data.versions[e].version);$("#changelog-body").html(atob(Core.source.data.versions[e].changelog));$("#changelog-modal").modal("show")});Core.success()}};